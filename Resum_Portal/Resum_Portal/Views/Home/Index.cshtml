@model IEnumerable<Resum_Portal.Models.tbl_Designation>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<div class="container-fluid">
    <div class="row">
        <div class="col-lg-12">
            <div class="card">
                <div class="card-header">
                    <h4 class="card-title">Create New User</h4>
                </div>
                <div class="card-body">
                    <div class="basic-form">
                        <span class="text-bg-danger" id="span_1">@ViewBag.msg</span>
                        <form method="post" class="form-valide-with-icon needs-validation" enctype="multipart/form-data" novalidate>
                            @Html.AntiForgeryToken()

                            <div class="mb-3">
                                <label class="text-label form-label" for="">Name</label>
                                <div class="input-group">
                                    <span class="input-group-text search_icon"> <i class="fa fa-user"></i> </span>
                                    <input type="text" class="form-control br-style" id="" name="Name" placeholder="Enter User's Name.." required>
                                    <div class="invalid-feedback">
                                        Please Enter Name.
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="text-label form-label" for="validationCustomUsername">Email</label>
                                <div class="input-group validate-username">
                                    <span class="input-group-text search_icon"><i class="fa-solid fa-envelope"></i> </span>
                                    <input type="email" class="form-control br-style" id="validationCustomUsername" name="Email" placeholder="Enter a email address.." required>
                                    <div class="invalid-feedback">
                                        Please Enter a Email.
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="text-label form-label" for="">Mobile Number</label>
                                <div class="input-group">
                                    <span class="input-group-text search_icon"><i class="fa-solid fa-phone"></i> </span>
                                    <input type="number" class="form-control br-style" id="" name="Mobile" placeholder="Enter Mobile Number..">

                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="text-label form-label" for="validate-Gender">Choose your Gender</label>
                                <div class="input-group validate-Gender">
                                    <span class="input-group-text search_icon"><i class="fa-solid fa-venus-mars"></i> </span>
                                    <div class="border border-1 form-control">
                                        <label class="radio-inline me-3 mt-1"><input type="radio" name="Gender" value="Male"> Male</label>
                                        <label class="radio-inline me-3 mt-1 ms-2"><input type="radio" name="Gender" value="Female"> Female</label>
                                        <label class="radio-inline me-3 mt-1 ms-2"><input type="radio" name="Gender" value="Other"> Other</label>
                                    </div>
                                    @*<div class="invalid-feedback">
                    Please Select Gender.
                </div>*@
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="text-label form-label" for="">Select Designation</label>
                                <div class="input-group">
                                    <span class="input-group-text search_icon"> <i class="fa-solid fa-graduation-cap"></i></span>
                                    <select class="default-select size-1 form-control wide" name="Designation">
                                        @if (Model != null)
                                        {
                                            <option disabled selected>--Select Your Designation--</option>
                                            foreach (var item in Model)
                                            {
                                                if (item.Status.Equals(true))
                                                {
                                                <option>@item.Designation</option>
                                                }
                                            }
                                        }
                                    </select>
                                    @*<div class="invalid-feedback">
                    Please Enter Name.
                </div>*@
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="text-label form-label" for="">Date Of Joining</label>
                                <div class="input-group">
                                    <span class="input-group-text search_icon"> <i class="fa-solid fa-calendar-days"></i> </span>
                                    <input type="date" class="form-control br-style" id="" name="Date_of_Joining" required>
                                    <div class="invalid-feedback">
                                        Please Enter Joining date.
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="text-label form-label" for="photoInput">Photo</label>
                                <div class="input-group">
                                    <span class="input-group-text search_icon"><i class="fa-solid fa-image"></i></span>
                                    <input type="file" class="form-control br-style" id="photoInput" name="Photo" required>
                                    <div class="invalid-feedback">
                                        Please select a photo.
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="text-label form-label" for="">Address</label>
                                <div class="input-group">
                                    <span class="input-group-text search_icon"><i class="fa-solid fa-location-dot"></i></span>
                                    <textarea name="Address" class="form-control br-style" required placeholder="Address"></textarea>
                                    <div class="invalid-feedback">
                                        Please Enter Address.
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="text-label form-label" for="dz-password">Password *</label>
                                <div class="input-group transparent-append  validate-password">
                                    <span class="input-group-text search_icon"> <i class="fa fa-lock"></i> </span>
                                    <input type="password" class="form-control" id="dz-password" name="Password" placeholder="Create a Password.." required>
                                    <span class="input-group-text search_icon show-pass br-style">
                                        <i class="fa fa-eye-slash"></i>
                                        <i class="fa fa-eye"></i>
                                    </span>
                                    <div class="invalid-feedback">
                                        Please Enter a Password.
                                    </div>
                                </div>
                            </div>
                            <input type="text" name="Role" value="User" readonly hidden>
                            <select name="Status" hidden>
                                <option>True</option>
                            </select>
                            <input type="text" value="@User.Identity.Name" name="CreatedBy" hidden>
                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" value="" id="invalidCheck2" required>
                                    <label class="form-check-label" for="invalidCheck2">
                                        Check Me out
                                    </label>
                                </div>
                            </div>
                            <button type="submit" class="btn me-2 btn-primary" onclick="return Validation()">Submit</button>
                            <button type="button" class="btn btn-light"><a href="/home/DashBoard" class="link">Back</a></button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--**********************************
    Content body end
***********************************-->

<!--**********************************
   Support ticket button start
***********************************-->
<!--**********************************
   Support ticket button end
***********************************-->
<script>

    (function () {
        'use strict'

        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        var forms = document.querySelectorAll('.needs-validation')

        // Loop over them and prevent submission
        Array.prototype.slice.call(forms)
            .forEach(function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }

                    form.classList.add('was-validated')
                }, false)
            })
       
    })()

    function Validation() {
        var email = document.getElementById("email").value;
        var mobile = document.getElementsByName("Mobile")[0].value;
        var password = document.getElementsByName("Password")[0].value;
        var address = document.getElementsByName("Address")[0].value;

        
        if (email.length == 0) {
            document.getElementById("span_2").innerHTML = "** fill email";
            setTimeout(function () {
                document.getElementById("span_2").innerHTML = "";
            }, 5000);
            return false;
        }
        if (address.length == 0) {
            document.getElementById("span_5").innerHTML = "** fill Address";
            setTimeout(function () {
                document.getElementById("span_5").innerHTML = "";
            }, 5000);
            return false;
        }
        if (email.indexOf("@@") <= 0 && email.length > 0) {
            document.getElementById("span_2").innerHTML = "** Invalid email format";
            setTimeout(function () {
                document.getElementById("span_2").innerHTML = "";
            }, 5000);
            return false;
        } else {
            document.getElementById("span_2").innerHTML = "";
        }

        if ((email.charAt(email.length - 4) != '.') && (email.charAt(email.length - 3) != '.' && email.length > 0)) {
            document.getElementById("span_2").innerHTML = "** Invalid email format";
            setTimeout(function () {
                document.getElementById("span_2").innerHTML = "";
            }, 5000);
            return false;
        } else {
            document.getElementById("span_2").innerHTML = "";
        }
        if (mobile.length > 0) {
            if (mobile.length !== 10 || isNaN(mobile)) {
                document.getElementById("span_3").innerHTML = "** Mobile Number must be 10 digits";
                setTimeout(function () {
                    document.getElementById("span_3").innerHTML = "";
                }, 5000);
                return false;
            }
            else if (mobile.charAt(0) != 9 && mobile.charAt(0) != 8 && mobile.charAt(0) != 7) {
                document.getElementById("span_3").innerHTML = "** Invalid Mobile Number";
                setTimeout(function () {
                    document.getElementById("span_3").innerHTML = "";
                }, 5000);
                return false;
            }
            else {
                document.getElementById("span_3").innerHTML = "";
            }
        }
        if (password.length == 0) {
            document.getElementById("span_4").innerHTML = "** fill Password";
            setTimeout(function () {
                document.getElementById("span_4").innerHTML = "";
            }, 5000);
            return false;
        }
        if (password.length > 0) {
            if (password.length < 8) {
                document.getElementById("span_4").innerHTML = "** Password must be at least 8 characters long";
                setTimeout(function () {
                    document.getElementById("span_4").innerHTML = "";
                }, 5000);
                return false;
            } else {
                document.getElementById("span_4").innerHTML = "";
            }
        }
        else {
            return false;
        }
        return true; // Proceed with form submission
    }

</script>
